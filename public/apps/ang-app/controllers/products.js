(function(){define(["./module"],function(a){return a.controller("ProductsCtrl",["$scope","$firebase","ngProgress",function(a,b,c){return a.featuredProducts=[],c.start(),a.products=a.genericItems=b(new Firebase("https://"+k$.settings.firebaseName+".firebaseio.com/"+k$.settings.firebaseNameVersion+"/products/")),a.products.$on("loaded",function(){return c.complete(),a.currentPage=0,a.pageSize=10,a.numPages=function(){return Math.ceil((a.genericItems.$getIndex().length-3)/a.pageSize)},a.startFrom=function(){return $(".product-img").popover(),a.currentPage*a.pageSize+3},a.increment=function(){return a.currentPage++},a.deincrement=function(){return a.currentPage--},a.setCurrentPage=function(b){return a.currentPage=b},a.lastRemoved=null,a.purchases=[{id:"a49a78f944bf1f73f3f7ff9672463bb1abd4a402",product:a.products.$child("-JBfLmlGwW9B3zNv-XH9"),quantity:2},{id:"c9066be544fb0fa01a9c4a12dbe9bc1b1a8a3ac3",product:a.products.$child("-JBfNWBiOqEuMdcYkgBG"),quantity:4},{id:"c9904d5ab9931e0f29f721aa0754effc77b66196",product:a.products.$child("-JBfPahaB9FomJej6cyu"),quantity:1}],a.deletePurchase=function(b){var c;return c=0,$.grep(a.purchases,function(a,d){if(a.id===b)return c=d}),a.lastRemoved=a.purchases[c],a.purchases.splice(c,1)},a.restorePurchase=function(b){return a.purchases.push(b),a.lastRemoved=null},a.total=function(){return a.purchases.reduce(function(a,b){return{quantity:a.quantity+b.quantity*b.product.price}},{quantity:0}).quantity}})}])})}).call(this)